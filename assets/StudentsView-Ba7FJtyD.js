import{k as M,h as t,c as l,b as s,r as m,o as O,l as L,a as S,m as Q,e as R,F as x,d as w,n as f,g as T,f as U,p as B,q as v,t as r,s as p}from"./index-B0xRxN1v.js";import{_ as W}from"./Breadcrumb-BShMdK3-.js";const X={},A={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"};function G(z,i){return t(),l("svg",A,i[0]||(i[0]=[s("path",{fill:"currentColor",d:"M18.577 6.183a1 1 0 0 1 .24 1.394l-5.666 8.02c-.36.508-.665.94-.94 1.269c-.287.34-.61.658-1.038.86a2.83 2.83 0 0 1-2.03.153c-.456-.137-.82-.406-1.149-.702c-.315-.285-.672-.668-1.09-1.116l-1.635-1.753a1 1 0 1 1 1.462-1.364l1.606 1.722c.455.487.754.806.998 1.027c.24.216.344.259.385.271c.196.06.405.045.598-.046c.046-.022.149-.085.36-.338c.216-.257.473-.62.863-1.171l5.642-7.986a1 1 0 0 1 1.394-.24"},null,-1)]))}const h=M(X,[["render",G]]),H={},J={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"};function K(z,i){return t(),l("svg",J,i[0]||(i[0]=[s("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M18 6L6 18M6 6l12 12"},null,-1)]))}const C=M(H,[["render",K]]),P={class:"mt-5"},Y={class:"flex items-center justify-between mb-2"},Z=["dir"],ee={class:"overflow-x-auto"},te={class:"w-full text-sm text-left bg-background text-foreground"},se={class:"border-b"},ae=["onClick"],le={key:0,class:"ml-1 text-xs"},ne={key:0},oe={key:1},re={class:"px-6 py-3"},ce={class:"px-6 py-3"},ie={class:"px-6 py-3"},de={class:"flex flex-col items-center gap-1"},ue={class:"inline-flex items-center gap-1"},pe={class:"px-6 py-3"},_e={key:0},fe={key:1},me={class:"px-6 py-3"},he={class:"inline-flex items-center gap-1"},xe={key:2},ve={key:0,class:"px-6 py-3"},ye={class:"flex flex-col items-center gap-1"},be={class:"inline-flex items-center gap-1"},ke={key:0,class:"inline-flex items-center gap-1"},ge={key:1,class:"px-6 py-3"},Se={key:0},we=["colspan"],Ve={__name:"StudentsView",setup(z){const{getStudents:i}=T();let V="ltr";const y=m(""),d=m(null),_=m(null),$=U(),N=$.query.semester,j=$.query.class,q=[{title:"Semesters List",link:"/"},{title:"Classes List",link:`/classes?semester=${N}`},{title:"Students List",link:""}],b=m([]),k=m([]);O(async()=>{const{studentsData:n,direction:o}=await i(N,j),e=n.flatMap(a=>a.dates.map(u=>u.date)),c=[...new Set(e)].map((a,u)=>({label:a,field:`session${u+1}`,sortable:!0}));b.value=n.map((a,u)=>{var D;return{number:u+1,fullName:a.fullName,records:(D=a.dates)==null?void 0:D.map(E=>E.records),presentation:{presented:a.presentation.presented,date:a.presentation.date,title:a.presentation.title},finalScore:a.finalScore,totalScore:{passed:a.totalScore.passed,score:a.totalScore.score}}}),k.value=[{label:"#",field:"number",sortable:!0},{label:"نام و نام خانوادگی",field:"fullName",sortable:!0},{label:"ارائه",field:"presentation",sortable:!0},{label:"پایان ترم",field:"finalScore",sortable:!0},{label:"نمره کل",field:"totalScore",sortable:!0},...c],V=o});const F=L(()=>d.value?[...b.value].sort((n,o)=>{const e=n[d.value],c=o[d.value];if(e===c)return 0;const a=_.value==="asc"?1:-1;return e>c?a:-a}):b.value),g=L(()=>{const n=y.value.toLowerCase();return F.value.filter(o=>Object.values(o).join(" ").toLowerCase().includes(n))}),I=n=>{d.value===n?_.value=_.value==="asc"?"desc":"asc":(d.value=n,_.value="asc")};return(n,o)=>(t(),l("main",null,[S(W,{"breadcrumb-items":q}),s("div",P,[s("div",Y,[S(Q,{modelValue:y.value,"onUpdate:modelValue":o[0]||(o[0]=e=>y.value=e)},null,8,["modelValue"])]),s("div",{dir:R(V),class:"overflow-hidden rounded-md border"},[s("div",ee,[s("table",te,[s("thead",se,[s("tr",null,[(t(!0),l(x,null,w(k.value,e=>(t(),l("th",{key:e.field,class:"px-6 py-4 font-medium whitespace-nowrap"},[s("div",{class:B(["flex items-center justify-center text-center cursor-pointer","text-muted-foreground transition-colors duration-300",{"hover:text-inherit":e.sortable}]),onClick:c=>e.sortable?I(e.field):null},[v(r(e.label)+" ",1),e.sortable?(t(),l("span",le,[d.value===e.field&&_.value==="asc"?(t(),l("span",ne,"▲")):d.value===e.field&&_.value==="desc"?(t(),l("span",oe,"▼")):f("",!0)])):f("",!0)],10,ae)]))),128))])]),s("tbody",null,[(t(!0),l(x,null,w(g.value,(e,c)=>(t(),l("tr",{key:c,class:B(["whitespace-nowrap text-center",{"border-b":c!==g.value.length-1}])},[s("td",re,r(e.number),1),s("td",ce,r(e.fullName),1),s("td",ie,[s("div",de,[s("span",null,r(e.presentation.date),1),s("span",ue,[e.presentation.presented===!0?(t(),p(h,{key:0,class:"size-7 text-green-500"})):e.presentation.presented===!1?(t(),p(C,{key:1,class:"size-6 text-red-500"})):(t(),p(h,{key:2,class:"size-7 text-amber-500"})),v(" "+r(e.presentation.title),1)])])]),s("td",pe,[e.finalScore?(t(),l("span",_e,r(e.finalScore),1)):(t(),l("span",fe,"-"))]),s("td",me,[s("div",he,[e.totalScore.passed===!0?(t(),p(h,{key:0,class:"size-7 text-green-500"})):e.totalScore.passed===!1?(t(),p(C,{key:1,class:"size-6 text-red-500"})):f("",!0),s("span",null,r(e.totalScore.score),1),!e.totalScore.score&&!e.totalScore.passed?(t(),l("span",xe,"-")):f("",!0)])]),(t(!0),l(x,null,w(e.records,(a,u)=>(t(),l(x,{key:"record"+u},[a?(t(),l("td",ve,[s("div",ye,[s("span",be,[a.attendance?(t(),p(h,{key:0,class:"size-7 text-green-500"})):(t(),p(C,{key:1,class:"size-6 text-red-500"})),v(" "+r(a.attendance?"حاضر":"غایب"),1)]),a.homeWork?(t(),l("span",ke,[S(h,{class:"size-7 text-green-500"}),o[1]||(o[1]=v(" تمرین ارسال شده "))])):f("",!0),s("span",null,r(a.quiz),1)])])):(t(),l("td",ge,"-"))],64))),128))],2))),128)),g.value.length===0?(t(),l("tr",Se,[s("td",{colspan:k.value.length+2,class:"px-6 py-3 text-center text-gray-500"}," No results found. ",8,we)])):f("",!0)])])])],8,Z)])]))}};export{Ve as default};
